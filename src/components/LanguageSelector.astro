---
import { languages } from '../i18n/ui';
const currentPath = Astro.url.pathname;
---

<div class="relative inline-block text-left">
  <button
    class="bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-full w-full text-left hover:bg-white/20 transition-colors cursor-pointer"
    onclick="document.getElementById('lang-select').classList.toggle('hidden')"
  >
    <span>🌐 Idioma: </span>
    {languages[currentPath.split('/')[1]] || 'Seleccionar idioma'}
  </button>

  <div
    id="lang-select"
    class="absolute mt-2 w-full bg-white/10 backdrop-blur-sm rounded-lg shadow-lg hidden"
  >
    <div class="flex flex-col">
      {
        Object.entries(languages).map(([lang, label]) => (
          <a
            href={`/${lang}/`}
            class="px-4 py-2 text-white hover:bg-white/20 transition-colors"
            onClick="window.location.pathname = this.href"
          >
            {label}
          </a>
        ))
      }
    </div>
  </div>
</div>
